{% load static %}
{% load socialaccount %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign In - LinkedHub</title>
    <link rel="icon" type="image/png" href="{% static 'images/aim.ico' %}">
    <link rel="stylesheet" href="{% static 'css/login-account.css' %}">
</head>
<body>
    <div class="main-content">
        <div class="login-container">
            <div class="form-section">
                <div class="auth-header">                
                    <img src="{% static 'images/logo.png' %}" alt="LinkedHub Logo"> 
                </div>

                <!-- Fixed Alert Messages - No slider effect -->
                {% if messages %}
                    <div class="alert-container">
                        {% for message in messages %}
                            <div class="alert alert-{{ message.tags }}" role="alert">
                                {{ message }}
                                <button type="button" class="btn-close" onclick="this.parentElement.style.display='none'" aria-label="Close">&times;</button>
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}

                <form method="post" action="{% url 'account_login' %}">
                    {% csrf_token %}
                    
                    <div class="form-floating mb-3">
                        {{ form.login }}
                        <label for="{{ form.login.id_for_label }}">Username or Email</label>
                        {% if form.login.errors %}
                            <div class="text-danger small mt-1">
                                {% for error in form.login.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>

                    <div class="form-floating mb-3">
                        {{ form.password }}
                        <label for="{{ form.password.id_for_label }}">Password</label>
                        {% if form.password.errors %}
                            <div class="text-danger small mt-1">
                                {% for error in form.password.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>

                    <button type="submit" class="btn btn-primary">
                        Sign In
                    </button>
                    
                    <div class="forgot-password-container">
                        <a href="{% url 'account_reset_password' %}" class="text-decoration-none">
                            Forgot your password?
                        </a>
                    </div>

                    <div class="divider">
                        <span>Or continue with</span>
                    </div>

                    <a href="{% provider_login_url 'google' %}" class="btn btn-google">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 48 48">
                            <defs>
                                <path id="a" d="M44.5 20H24v8.5h11.8C34.7 33.9 30.1 37 24 37c-7.2 0-13-5.8-13-13s5.8-13 13-13c3.1 0 5.9 1.1 8.1 2.9l6.4-6.4C34.6 4.1 29.6 2 24 2 11.8 2 2 11.8 2 24s9.8 22 22 22c11 0 21-8 21-22 0-1.3-.2-2.7-.5-4z"/>
                            </defs>
                            <clipPath id="b"><use xlink:href="#a" overflow="visible"/></clipPath>
                            <path clip-path="url(#b)" fill="#FBBC05" d="M0 37V11l17 13z"/>
                            <path clip-path="url(#b)" fill="#EA4335" d="M0 11l17 13 7-6.1L48 14V0H0z"/>
                            <path clip-path="url(#b)" fill="#34A853" d="M0 37l30-23 7.9 1L48 0v48H0z"/>
                            <path clip-path="url(#b)" fill="#4285F4" d="M48 48L17 24l-4-3 35-10z"/>
                        </svg>
                        Continue with Google
                    </a>
                    
                    <p class="auth-links">
                        Don't have an account?<a href="{% url 'account_signup' %}">Sign up here</a>
                    </p>
                </form>
            </div>

            <div class="image-section">
                <img src="{% static 'images/login.png' %}" alt="LinkedHub Login">
            </div>
        </div>
    </div>

    <div class="terms">
         <a href="{% url 'terms' %}" target="_blank">Terms & Privacy Policy</a>.
    </div>

    <section class="footer_section">
        <div class="container">
            <p>&copy; <span id="displayYear"></span> All rights reserved linkedHub.</p>
        </div>
    </section>

    <script>
        // Set current year in footer
        document.addEventListener('DOMContentLoaded', function() {
            const displayYear = document.getElementById('displayYear');
            if (displayYear) {
                displayYear.textContent = new Date().getFullYear();
            }
        });

        // Auto hide alerts after 5 seconds (optional)
        document.addEventListener('DOMContentLoaded', function() {
            const alerts = document.querySelectorAll('.alert');
            alerts.forEach(function(alert) {
                setTimeout(function() {
                    if (alert && alert.parentElement) {
                        alert.style.opacity = '0';
                        setTimeout(function() {
                            alert.style.display = 'none';
                        }, 300);
                    }
                }, 5000);
            });
        });
    </script>
</body>
</html>